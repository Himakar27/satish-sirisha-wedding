<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SS</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <!-- audio -->
    <audio id="background-audio" autoplay loop>
        <source src="assets/music/audio.mp3" type="audio/mp3">
        Your browser does not support the audio tag.
    </audio>
    <!-- Loader -->
    <div id="loader" class="loader-container">
        <div class="loader">
            <img src="assets/img/dribbble.gif" alt="loader">
        </div>
    </div>
    <div id="main" style="display: none;">
        <div class="section fullScreen">
            <div style="display: inline-block; text-align: center;">
                <button id="fullscreen-btn">Click here to go full screen</button>
                <h3><img src="assets/img/full-screen.png" /> Enable fullscreen for a better viewing experience.</h3>
                <h3><img src="assets/img/airpods.png" /> Use earphones for a better audio experience.</h3>
                <h3>Sit back and enjoy the invitation; it will scroll automatically.</h3>
            </div>
        </div>
        <!-- <div class="section swipe">
                <video autoplay loop muted>
                    <source src="assets/videos/swipe.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
        </div> -->
        <div class="section">
            <div class="video-background">
                <video autoplay loop muted>
                    <source src="assets/videos/candel.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <div class="content landing">
                    <!-- Your foreground content goes here -->
                    <h1>
                        <span class="jesus">Jesus</span>
                        <span class="created">Blessed a soul and divided it into two</span>
                        <span class="one-again">Now it's time for them to become one again.</span>
                    </h1>
                </div>
            </div>
            
        </div>
        <div class="section">
            <div class="video-background">
                <video autoplay loop muted>
                    <source src="assets/videos/butterfly-green.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <div class="content path">
                    <!-- Your foreground content goes here -->
                    <h1><span class="paths">Our paths crossed for the first time on <span class="date"> 25<sup>th</sup> March 2024.</span></span></h1>
                </div>
            </div>  
        </div>
        <div class="section">
            <div class="video-background">
                <video autoplay loop muted>
                    <source src="assets/videos/flowers-3d.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <div class="content shadow">
                    <h1>
                        <span class="names-satish">Satish</span>
                        <span class="names-sirisha">Sirisha</span>
                        <img src="assets/img/satish-shadow1.png" alt="couple">
                    </h1>   
                </div>
            </div>
        </div>

        <div class="section">
            <div class="video-background">
                <video autoplay loop muted style="transform: scaleX(-1); top: 0; left: 0; width: 100%; height: 100%;">
                    <source src="assets/videos/rings.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <div class="w-100 d-flex enguaged">
                    <div class="w-59">
                        <img src="assets/img/engaged.jpg" alt="couple" style="opacity: 0.8;">
                    </div>
                    <div class="w-41">
                        <h1 style="background: pink; position: relative; z-index: 5; margin-left: -7%; margin-top: -11%; box-shadow: 0px 0px 64px #000; padding: 20px 0px;border-bottom-left-radius: 69px;"><span class="one-again">With our hearts united <br/> we got engaged on <br/><span class="date"> 03<sup>rd</sup> July 2024.</span></span></h1>
                    </div>
                </div>
                <div id="rosePetals2"></div>
            </div>
            
        </div>
        <div class="section">
            <div class="video-background">
                <video autoplay loop muted>
                    <source src="assets/videos/zooming-love.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <div class="content zooming-love">
                    <!-- Your foreground content goes here -->
                    <!-- <h1><span>With hearts united and Jesus' blessings, they got engaged on [Date].</span></h1> -->
                    <img src="assets/img/satish.png" alt="couple">
                    <span class="created">We are getting married</span>
                </div>
            </div>
            
        </div>
    
        <div class="section">
            <div class="video-background">
                <div class="balloon">
                    <img src="assets/img/out2.jpeg" alt="couple">
                </div>
                <div class="balloon">
                    <img src="assets/img/satish-croped.png" alt="couple">
                </div>
                <div class="balloon">
                    <img src="assets/img/out1.jpeg" alt="couple">
                </div>
                <div class="balloon">
                    <img src="assets/img/en1.jpeg" alt="couple">
                </div>
                <div class="balloon">
                    <img src="assets/img/en4.jpeg" alt="couple">
                </div>
                <div class="content floating-ballon">
                    <h1>
                        <span class="one-again">Save the Date</span>
                        <span class="created">23<sup>rd</sup> October 2024</span>
                    </h1>
                    
                </div>
                <div id="rosePetals1"></div>
            </div>
            
        </div>
        <div class="section">
            <div class="video-background invite">
                <div class="w-33" style="text-align: right;">
                    <img src="assets/img/en1.jpeg" alt="couple">
                </div>
                <div class="w-33" style="text-align: right;">
                    <img src="assets/img/en3.jpeg" alt="couple">
                </div>
                <div class="w-33" style="text-align: right;">
                    <img src="assets/img/en2.jpeg" alt="couple">
                </div>
                <div class="content">
                    <h1>
                        <span class="one-again">We joyfully invite you to share in our marriage celebration!</span>
                    </h1>
                    
                </div>
            </div>
            
        </div>
        <div class="section">
            <div class="video-background invite">
                <div class="content thank">
                    <h1>
                        <span class="one-again">Thank You</span>
                    </h1>
                    
                </div>
            </div>
            
        </div>

        <div id="flipMessage">
                <video autoplay loop muted>
                    <source src="assets/videos/rotate-phone.mp4" type="video/mp4">
                    Rotate Your Phone
                </video>
        </div>
    </div>

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/TweenMax.min.js"></script>
    
 <script>
    //--------------------Scrolling-------------------
    const sections = document.querySelectorAll('.section');
    let currentIndex = 0;
    let isScrolling = false;  // Cooldown flag to prevent rapid scrolling
    let autoScrollTimeout;  // Variable to store timeout for auto-scroll
    const autoScrollDelay = 17000;  // 17 seconds
    
    const scrollToSection = (index) => {
        if (index >= 0 && index < sections.length && !isScrolling) {
            isScrolling = true;  // Set the cooldown flag
            sections[index].scrollIntoView({ behavior: 'smooth' });
            currentIndex = index;

            // Reset the timeout for auto-scroll after user interaction
            resetAutoScroll();

            // Set a timeout equal to the smooth scroll duration
            setTimeout(() => {
                isScrolling = false;  // Reset the flag after scrolling completes
                checkAndExitFullScreen();  // Check if we should exit fullscreen
            }, 1200);  // 1200ms, slightly longer than the transition time
        }
    };
    
    // Check and exit fullscreen if on the last section
    const checkAndExitFullScreen = () => {
        if (currentIndex === sections.length - 1) {
            setTimeout(() => {
                if (document.fullscreenElement) {
                    document.exitFullscreen();
                }
            }, 10000); // Exit fullscreen after 10 seconds
        }
    };
    
    // Handle scroll via mouse wheel
    window.addEventListener('wheel', (event) => {
        if (!isScrolling) {
            if (event.deltaY > 0) {
                scrollToSection(currentIndex + 1);
            } else if (event.deltaY < 0) {
                scrollToSection(currentIndex - 1);
            }
        }
    });
    
    // Handle scroll via keyboard arrows
    window.addEventListener('keydown', (event) => {
        if (!isScrolling) {
            if (event.key === 'ArrowDown') {
                scrollToSection(currentIndex + 1);
            } else if (event.key === 'ArrowUp') {
                scrollToSection(currentIndex - 1);
            }
        }
    });
    
    // Variables to track touch start and end positions
    let touchStartY = 0;
    let touchEndY = 0;
    
    // Handle touch events for swipe gestures on mobile
    window.addEventListener('touchstart', (event) => {
        touchStartY = event.touches[0].clientY;
    });
    
    window.addEventListener('touchmove', (event) => {
        touchEndY = event.touches[0].clientY;
    });
    
    window.addEventListener('touchend', () => {
        if (!isScrolling) {
            if (touchStartY > touchEndY + 50) {  // Swipe up
                scrollToSection(currentIndex + 1);
            } else if (touchStartY < touchEndY - 50) {  // Swipe down
                scrollToSection(currentIndex - 1);
            }
        }
    });
    
    //--------------------Auto-scroll after 20 seconds-------------------
    const resetAutoScroll = () => {
        clearTimeout(autoScrollTimeout);  // Clear previous timeout
        autoScrollTimeout = setTimeout(() => {
            // Auto-scroll to the next section after 20 seconds of inactivity
            scrollToSection(currentIndex + 1);
        }, autoScrollDelay);
    };
    
    // Set initial timeout for auto-scroll
    resetAutoScroll();
    
    // Reset auto-scroll timer on user interactions
    ['wheel', 'keydown', 'touchstart'].forEach(eventType => {
        window.addEventListener(eventType, resetAutoScroll);
    });
    
    //--------------------Flip message-------------------
    function checkOrientation() {
        const flipMessage = document.getElementById('flipMessage');
        
        if (window.innerHeight > window.innerWidth) {
            // Portrait mode: Show message
            flipMessage.style.display = 'flex';
        } else {
            // Landscape mode: Hide message
            flipMessage.style.display = 'none';
        }
    }
    
    // Check orientation on page load
    checkOrientation();
    
    // Listen for orientation changes
    window.addEventListener('resize', checkOrientation);
    
    // Rose petals
    // Function to initialize animation for a given element ID
    function initRosePetalAnimation(containerId) {
        var container = document.getElementById(containerId);
        var w = window.innerWidth, h = window.innerHeight;
        var total = 30;
    
        // Create and animate rose petals
        for (var i = 0; i < total; i++) {
            var Div = document.createElement('div');
            TweenLite.set(Div, {attr: {class: 'dot'}, x: R(0, w), y: R(-200, -150), z: R(-200, 200)});
            container.appendChild(Div);
            animm(Div, h); // Pass height to the animm function
        }
    }
    
    // Reusable animation function for rose petals
    function animm(elm, height) {
        TweenMax.to(elm, R(6, 15), {y: height + 100, ease: Linear.easeNone, repeat: -1, delay: -15});
        TweenMax.to(elm, R(4, 8), {x: '+=100', rotationZ: R(0, 180), repeat: -1, yoyo: true, ease: Sine.easeInOut});
        TweenMax.to(elm, R(2, 8), {rotationX: R(0, 360), rotationY: R(0, 360), repeat: -1, yoyo: true, ease: Sine.easeInOut, delay: -5});
    }
    
    // Random number generator function
    function R(min, max) {
        return min + Math.random() * (max - min);
    }
    
    // Initialize animations for multiple containers
    initRosePetalAnimation("rosePetals1");  // First container
    initRosePetalAnimation("rosePetals2");  // Second container
    
    // Loader
    // Show the content after the page is fully loaded
    window.addEventListener("load", function() {
        const loader = document.getElementById('loader');
        const main = document.getElementById('main');
        
        // Hide the loader
        loader.style.display = 'none';
    
        // Show the content
        main.style.display = 'block';
    });
    
    // Audio
    let audio; // Declare audio variable in a broader scope
    document.addEventListener('DOMContentLoaded', function () {
        audio = document.getElementById('background-audio'); // Assign the audio element here
        
        // Attempt autoplay after the user interacts with the page
        document.body.addEventListener('click', () => {
            if (audio.paused) { // Only play if the audio is paused
                audio.volume = 0.2;
                audio.currentTime = 135; // Set the starting point if needed
                audio.play().catch((error) => {
                    console.log("Autoplay failed: " + error);
                });
            }
        });
    });
    
    // Full screen
    document.getElementById("fullscreen-btn").addEventListener("click", function() {
        const elem = document.documentElement; // This selects the entire webpage
    
        if (!document.fullscreenElement) {
            if (elem.requestFullscreen) {
                elem.requestFullscreen();
            } else if (elem.mozRequestFullScreen) { // Firefox
                elem.mozRequestFullScreen();
            } else if (elem.webkitRequestFullscreen) { // Chrome, Safari, and Opera
                elem.webkitRequestFullscreen();
            } else if (elem.msRequestFullscreen) { // IE/Edge
                elem.msRequestFullscreen();
            }
        } else {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            }
        }
        $('.fullScreen').hide();
    });
</script>




</body>
</html>